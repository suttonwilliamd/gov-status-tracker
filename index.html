<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U.S. Government Services Status</title>
    <style>
        /* Base styles remain the same */
        :root {
            --online: #10B981;
            --offline: #EF4444;
            --checking: #F59E0B;
            --background: #F3F4F6;
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --primary: #1a73e8;
        }

        .category-filter {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .category-filter button {
            background: white;
            border: 1px solid #ddd;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-filter button.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Keep existing card styles */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>U.S. Government Services Status</h1>
            <div id="status-counter" class="status-counter">
                <span id="online-count">0</span>/<span id="total-count">0</span> services online
            </div>
            <div class="category-filter">
                <button data-category="all" class="active">All Services (200)</button>
                <button data-category="critical">Critical Services (25)</button>
                <button data-category="agencies">Major Agencies (50)</button>
                <button data-category="public">Public Services (75)</button>
                <button data-category="state">State Portals (50)</button>
            </div>
        </div>
        <div id="status-list"></div>
    </div>

<script>
const PRIORITY_GROUPS = {
    critical: [
        'usa.gov', 'whitehouse.gov', 'cdc.gov', 'fema.gov', 'weather.gov',
        'ssa.gov', 'medicare.gov', 'irs.gov', 'uscis.gov', 'fbi.gov',
        'cia.gov', 'dhs.gov', 'fda.gov', 'epa.gov', 'nih.gov',
        'va.gov', 'usps.gov', 'faa.gov', 'dot.gov', 'nasa.gov',
        'energy.gov', 'state.gov', 'treasury.gov', 'defense.gov', 'justice.gov'
    ],
    agencies: [
        // Cabinet-level departments
        'agriculture.gov', 'commerce.gov', 'education.gov', 'energy.gov',
        'hhs.gov', 'homelandsecurity.gov', 'housing.gov', 'interior.gov',
        'labor.gov', 'state.gov', 'transportation.gov', 'treasury.gov',
        'va.gov', 'defense.gov', 'justice.gov',
        // Major independent agencies
        'epa.gov', 'fcc.gov', 'federalreserve.gov', 'ftc.gov', 'gsa.gov',
        'nasa.gov', 'nsf.gov', 'sec.gov', 'sba.gov', 'usaid.gov',
        'usda.gov', 'usdoj.gov', 'usgs.gov', 'usmint.gov', 'uspto.gov'
    ],
    public: [
        // Public-facing services
        'benefits.gov', 'consumerfinance.gov', 'data.gov', 'disasterassistance.gov',
        'eia.gov', 'fueleconomy.gov', 'healthcare.gov', 'medicaid.gov',
        'nutrition.gov', 'recreation.gov', 'recreation.gov', 'science.gov',
        'studentloans.gov', 'travel.state.gov', 'vote.gov', 'weather.gov',
        'whitehouse.gov', 'usa.gov', 'usajobs.gov', 'usembassy.gov'
    ],
    state: [
        // Top 50 state portals
        'alabama.gov', 'alaska.gov', 'arizona.gov', 'arkansas.gov',
        'ca.gov', 'colorado.gov', 'connecticut.gov', 'delaware.gov',
        'florida.gov', 'georgia.gov', 'hawaii.gov', 'idaho.gov',
        'illinois.gov', 'indiana.gov', 'iowa.gov', 'kansas.gov',
        'kentucky.gov', 'louisiana.gov', 'maine.gov', 'maryland.gov',
        'mass.gov', 'michigan.gov', 'minnesota.gov', 'mississippi.gov',
        'missouri.gov', 'montana.gov', 'nebraska.gov', 'nevada.gov',
        'nh.gov', 'nj.gov', 'nm.gov', 'ny.gov', 'nc.gov',
        'nd.gov', 'ohio.gov', 'ok.gov', 'oregon.gov', 'pa.gov',
        'ri.gov', 'sc.gov', 'sd.gov', 'tn.gov', 'texas.gov',
        'utah.gov', 'vermont.gov', 'virginia.gov', 'wa.gov',
        'wv.gov', 'wisconsin.gov', 'wyoming.gov'
    ]
};

let activeDomains = [];
let onlineCount = 0;

function getDomainGroup(category) {
    switch(category) {
        case 'critical': return PRIORITY_GROUPS.critical;
        case 'agencies': return PRIORITY_GROUPS.agencies;
        case 'public': return PRIORITY_GROUPS.public;
        case 'state': return PRIORITY_GROUPS.state;
        default: return Object.values(PRIORITY_GROUPS).flat();
    }
}

function updateCounter() {
    document.getElementById('online-count').textContent = onlineCount;
    document.getElementById('total-count').textContent = activeDomains.length;
}

function createStatusCard(domain) {
    const card = document.createElement('a');
    card.className = 'status-card';
    card.href = `https://${domain}`;
    card.target = '_blank';
    card.rel = 'noopener noreferrer';
    card.innerHTML = `
        <div class="status-indicator checking"></div>
        <div class="domain-info">
            <div class="domain-name">${domain}</div>
        </div>
        <div class="last-checked">Checking...</div>
    `;
    return card;
}

async function checkDomainStatus(domain) {
    try {
        const response = await fetch(`${STATUS_API}${encodeURIComponent(domain)}`);
        const data = await response.json();
        return data.status === 'online';
    } catch (error) {
        return false;
    }
}

async function updateStatus() {
    const container = document.getElementById('status-list');
    onlineCount = 0;
    container.innerHTML = '';

    for(const domain of activeDomains) {
        const card = createStatusCard(domain);
        container.appendChild(card);

        try {
            const isOnline = await checkDomainStatus(domain);
            card.href = isOnline ? `https://${domain}` : '#';
            card.querySelector('.status-indicator').classList.remove('checking');
            card.querySelector('.status-indicator').classList.add(isOnline ? 'online' : 'offline');
            card.querySelector('.last-checked').textContent = new Date().toLocaleTimeString();

            if(isOnline) onlineCount++;
            updateCounter();
        } catch(error) {
            card.querySelector('.status-indicator').classList.remove('checking');
            card.querySelector('.status-indicator').classList.add('offline');
            card.querySelector('.last-checked').textContent = 'Check failed';
        }
    }
}

// Initialize with critical services
activeDomains = getDomainGroup('critical');
updateCounter();
updateStatus();

// Handle category switching
document.querySelectorAll('.category-filter button').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.category-filter button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        activeDomains = getDomainGroup(btn.dataset.category);
        updateCounter();
        updateStatus();
    });
});
</script>
</body>
</html>
